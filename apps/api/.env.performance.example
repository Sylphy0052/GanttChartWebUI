# Database Performance Configuration for T039
# Copy this to your .env file and adjust values based on your environment

# PostgreSQL Connection with Optimization Parameters
# Format: postgresql://username:password@localhost:5432/database?param1=value1&param2=value2

# Development Configuration (Single Node)
DATABASE_URL="postgresql://gantt_user:gantt_pass@localhost:5432/gantt_db?connection_limit=10&pool_timeout=20&statement_timeout=30000&idle_timeout=30000&schema=public"

# Production Configuration (High Load)
# DATABASE_URL="postgresql://gantt_user:gantt_pass@localhost:5432/gantt_db?connection_limit=20&pool_timeout=30&statement_timeout=60000&idle_timeout=60000&connect_timeout=10&schema=public"

# Performance Configuration Parameters:
# - connection_limit: Maximum number of connections in the pool (default: 10)
# - pool_timeout: Maximum time to wait for a connection (seconds)
# - statement_timeout: Maximum time for a single query (milliseconds)  
# - idle_timeout: Time before closing idle connections (milliseconds)
# - connect_timeout: Time to wait when establishing connection (seconds)
# - schema: Default schema to use

# Additional PostgreSQL Performance Settings (set in postgresql.conf):
# shared_buffers = 256MB                 # 25% of RAM for cache
# effective_cache_size = 1GB            # Available memory for caching
# work_mem = 32MB                       # Memory per query operation
# maintenance_work_mem = 64MB           # Memory for maintenance operations
# max_connections = 100                 # Maximum concurrent connections
# checkpoint_completion_target = 0.9    # Checkpoint completion target
# wal_buffers = 16MB                    # Write-ahead log buffer size
# random_page_cost = 1.1                # Cost of random page access (SSD optimized)

# Query Performance Monitoring Settings
SLOW_QUERY_THRESHOLD_MS=100            # Log queries slower than 100ms
ENABLE_QUERY_LOGGING=true              # Enable detailed query logging
PERFORMANCE_METRICS_ENABLED=true       # Enable performance metrics collection

# Connection Pool Health Check Settings
DB_HEALTH_CHECK_INTERVAL=30000         # Health check every 30 seconds
DB_HEALTH_CHECK_TIMEOUT=5000           # Health check timeout 5 seconds

# Index Optimization Settings
AUTO_ANALYZE_ENABLED=true              # Enable automatic ANALYZE
VACUUM_COST_DELAY=10                   # Vacuum cost delay (milliseconds)
AUTOVACUUM_SCALE_FACTOR=0.1           # Autovacuum scale factor